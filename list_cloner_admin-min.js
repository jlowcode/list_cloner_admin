define(["jquery","fab/fabrik"],(function(a,e){"use strict";return new Class({Implements:[Events],options:{},initialize:function(i){var l=this,n=a("[name='actualTable']").val();a("#"+n+"___model").closest(".fabrikElementContainer").attr("class").indexOf("mode-radio")<0?a("#"+n+"___model").on("change",(function(){l.actionChange(!1)})):(a("#"+n+"___model input[type='radio']").on("change",(function(){l.actionChange(!0)})),l.actionChange(!0)),e.addEvent("fabrik.form.submit.start",function(e){var i=!0,l="";a(".list_cloner_element").closest(".fabrikElementContainer").find(".fabrikLabel").css("color","#333840"),a("#adm_cloner_listas___name").val(a("#adm_cloner_listas___list_name_principal").val()),a(".list_cloner_element").each((function(e,n){var t=a(n).attr("orig_value").replace("_",""),o=n.value;""!=o&&t!=o||(i&&(l=n),i=!1)})),i||(e.result=i,a(l).closest(".fabrikElementContainer").find(".fabrikLabel").css("color","#FF4444"),alert("Os nomes das listas não podem ter o mesmo nome padrão ou estarem vazios. Altere ou complemente o nome da sua lista como desejado."))}.bind(this))},actionChange:function(e){var i=this;a(".classAddManual").remove();var l=a("[name='listid']").val(),n=a("[name='listModel']").val(),t=a("[name='actualTable']").val(),o=a("[name='easy']").val(),r=e?a("#"+t+"___model input[name='"+t+"___model[]']:checked").val():a("#"+t+"___model").val(),s="/plugins/fabrik_form/list_cloner_admin/list_cloner_names.php?tableModel="+r+"&listid="+l+"&listModel="+n;""!=r&&a.post(s,{},(function(a){var e=JSON.parse(a);if(""!=e.sucesso&&""==e.erro){var l=e.sucesso;i.setPrincipal(e,o),i.setAuxiliares(e,o)}if(""==e.sucesso&&""!=e.erro){l=e.erro;alert(l)}}))},setPrincipal:function(e,i){var l=this,n="";a(".fabrikGroup").append(l.htmlLinha("principal")),"1"==i?n=e.nomeListaPrincipal.replace("_",""):a("#group1 .principal").append(l.htmlLabel(e.nomeListaPrincipal,"Nome da Lista Principal")),a("#group1 .principal").append("<div style='display: flex; justify-content: start; width: 100%;'></div>"),a("#group1 .principal > div").append(l.htmlElement(e.tabelaListaModelo,"principal","list","Altere ou complemente o nome da sua lista:",n)),"1"!=i&&a("#group1 .principal > div").append(l.htmlElement(e.tabelaListaModelo,"principal","table","Nome da Tabela",e.sugestaoListaPrincipal))},setAuxiliares:function(e,i){var l=this;e.arrAuxiliares.forEach(((n,t)=>{if(null!==n.nome&&null!==n.id){var o="";if(a(".fabrikGroup").append(l.htmlLinha("auxiliar_"+(t+1))),"1"==i)o=n.nome.replace("_","");else a("#group1 .auxiliar_"+(t+1)).append(l.htmlLabel(n.nome,"Nome da Lista Auxiliar "+(t+1)));a("#group1 .auxiliar_"+(t+1)).append("<div style='display: flex; justify-content: start; width: 100%;'></div>"),a("#group1 .auxiliar_"+(t+1)+" > div").append(l.htmlElement(e.tabelaListaModelo,"auxiliar_"+(t+1),"list","Altere ou complemente o nome da sua lista:",o)),"1"!=i&&a("#group1 .auxiliar_"+(t+1)+" > div").append(l.htmlElement(e.tabelaListaModelo,"auxiliar_"+(t+1),"table","Nome da Tabela",n.sugestao))}}))},htmlLinha:function(a){var e="",i="";return e="padding:0px 30px;",e+="display: flex;",e+="flex-direction: row;",e+="margin-bottom: 20px;",e+="padding-top: 10px;","extras"!=a&&(e+="background-color:#eee;"),"principal"==a&&(e+="margin-top: 50px;"),i='<div class="row-fluid classAddManual '+a+'" style="'+e+'">',i+="</div>"},htmlLabel:function(a,e){return"width:250px;","display: flex;","flex-direction: column;","align-items: center;",'<p style="width:250px;display: flex;flex-direction: column;align-items: center;"><b>'+e+':</b><span style="margin-top: 12px;">'+a+"</span></p>"},htmlElement:function(a,e,i,l,n=""){var t="";return t='<div class="control-group fabrikElementContainer plg-field fb_el_'+a+"___"+i+"_name_"+e+' fabrikDataEmpty span6">',t+='<label for="'+a+"___"+i+"_name_"+e+'" class="fabrikLabel control-label">'+l+"</label>",t+='<div class="fabrikElement">',t+='<input type="text" id="'+a+"___"+i+"_name_"+e+'" name="'+a+"___"+i+"_name_"+e+'" maxlength="255" size="50" orig_value="'+n+'" class="input-medium form-control fabrikinput inputbox text list_cloner_element" value="'+n+'">',t+="</div>",t+='<div class="fabrikErrorMessage">',t+="</div>",t+="</div>"}})}));