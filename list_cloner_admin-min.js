define(["jquery","fab/fabrik"],(function(e,a){"use strict";return new Class({Implements:[Events],options:{},initialize:function(i){var l=this,t=e("[name='actualTable']").val(),n=e("[name='easy']").val();e("#"+t+"___model").on("change",(function(){e(".classAddManual").remove();var a=e("[name='listid']").val(),i=e("[name='listModel']").val(),r=e("#"+t+"___model").val(),o="/plugins/fabrik_form/list_cloner_admin/list_cloner_names.php?tableModel="+r+"&listid="+a+"&listModel="+i;""!=r&&e.post(o,{},(function(e){var a=JSON.parse(e);if(""!=a.sucesso&&""==a.erro){var i=a.sucesso;l.setPrincipal(a,n),l.setAuxiliares(a,n)}if(""==a.sucesso&&""!=a.erro){i=a.erro;alert(i)}}))})),a.addEvent("fabrik.form.submit.start",function(a){var i=!0,l="";e(".list_cloner_element").closest(".fabrikElementContainer").find(".fabrikLabel").css("color","#333840"),e("#adm_cloner_listas___name").val(e("#adm_cloner_listas___list_name_principal").val()),e(".list_cloner_element").each((function(a,t){var n=e(t).attr("orig_value").replace("_",""),r=t.value;""!=r&&n!=r||(i&&(l=t),i=!1)})),i||(a.result=i,e(l).closest(".fabrikElementContainer").find(".fabrikLabel").css("color","#FF4444"),alert("Os nomes das listas não podem ter o mesmo nome padrão ou estarem vazios. Altere ou complemente o nome da sua lista como desejado."))}.bind(this))},setPrincipal:function(a,i){var l=this,t="";e(".fabrikGroup").append(l.htmlLinha("principal")),"1"==i?t=a.nomeListaPrincipal.replace("_",""):e("#group1 .principal").append(l.htmlLabel(a.nomeListaPrincipal,"Nome da Lista Principal")),e("#group1 .principal").append("<div style='display: flex; justify-content: start; width: 100%;'></div>"),e("#group1 .principal > div").append(l.htmlElement(a.tabelaListaModelo,"principal","list","Altere ou complemente o nome da sua lista:",t)),"1"!=i&&e("#group1 .principal > div").append(l.htmlElement(a.tabelaListaModelo,"principal","table","Nome da Tabela",a.sugestaoListaPrincipal))},setAuxiliares:function(a,i){var l=this;a.arrAuxiliares.forEach(((t,n)=>{if(null!==t.nome&&null!==t.id){var r="";if(e(".fabrikGroup").append(l.htmlLinha("auxiliar_"+(n+1))),"1"==i)r=t.nome.replace("_","");else e("#group1 .auxiliar_"+(n+1)).append(l.htmlLabel(t.nome,"Nome da Lista Auxiliar "+(n+1)));e("#group1 .auxiliar_"+(n+1)).append("<div style='display: flex; justify-content: start; width: 100%;'></div>"),e("#group1 .auxiliar_"+(n+1)+" > div").append(l.htmlElement(a.tabelaListaModelo,"auxiliar_"+(n+1),"list","Altere ou complemente o nome da sua lista:",r)),"1"!=i&&e("#group1 .auxiliar_"+(n+1)+" > div").append(l.htmlElement(a.tabelaListaModelo,"auxiliar_"+(n+1),"table","Nome da Tabela",t.sugestao))}}))},htmlLinha:function(e){var a="",i="";return a="padding:0px 30px;",a+="display: flex;",a+="flex-direction: row;",a+="margin-bottom: 20px;",a+="padding-top: 10px;","extras"!=e&&(a+="background-color:#eee;"),"principal"==e&&(a+="margin-top: 50px;"),i='<div class="row-fluid classAddManual '+e+'" style="'+a+'">',i+="</div>"},htmlLabel:function(e,a){return"width:250px;","display: flex;","flex-direction: column;","align-items: center;",'<p style="width:250px;display: flex;flex-direction: column;align-items: center;"><b>'+a+':</b><span style="margin-top: 12px;">'+e+"</span></p>"},htmlElement:function(e,a,i,l,t=""){var n="";return n='<div class="control-group fabrikElementContainer plg-field fb_el_'+e+"___"+i+"_name_"+a+' fabrikDataEmpty span6">',n+='<label for="'+e+"___"+i+"_name_"+a+'" class="fabrikLabel control-label">'+l+"</label>",n+='<div class="fabrikElement">',n+='<input type="text" id="'+e+"___"+i+"_name_"+a+'" name="'+e+"___"+i+"_name_"+a+'" maxlength="255" size="50" orig_value="'+t+'" class="input-medium form-control fabrikinput inputbox text list_cloner_element" value="'+t+'">',n+="</div>",n+='<div class="fabrikErrorMessage">',n+="</div>",n+="</div>"}})}));